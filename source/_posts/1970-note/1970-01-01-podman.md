---
layout: post
title: podman ç­†è¨˜
date: 1970-01-01 12:00
author: Poy Chang
comments: true
categories: [Tools]
permalink: note-podman/
---

æœ¬ç¯‡ä½œç‚ºæ›¸ç±¤ç”¨é€”ï¼Œè¨˜éŒ„ç¶²è·¯ä¸Šçš„ podman ç›¸é—œè³‡è¨Š

## å®‰è£

```powershell
# ä½¿ç”¨ winget æœå°‹ Podman çš„å®‰è£ ID
winget search podman
# å®‰è£ Podman
winget install RedHat.Podman
# é©—è­‰å®‰è£
podman --version
```

## å¸¸ç”¨æŒ‡ä»¤

| åŠŸèƒ½               | æŒ‡ä»¤ç¯„ä¾‹                              | èªªæ˜                           |
| ------------------ | ------------------------------------- | ------------------------------ |
| æŸ¥çœ‹æœ¬åœ°æ˜ åƒæª”     | `podman images`                       | é¡¯ç¤ºå·²ä¸‹è¼‰çš„æ˜ åƒæª”             |
| åŸ·è¡Œå®¹å™¨           | `podman run -it --rm alpine sh`       | åŸ·è¡Œ Alpine å®¹å™¨ä¸¦é€²å…¥ shell   |
| å¾Œå°åŸ·è¡Œå®¹å™¨       | `podman run -d -p 8080:80 nginx`      | èƒŒæ™¯åŸ·è¡Œ nginx ä¸¦å°å¤–é–‹æ”¾ 8080 |
| æŸ¥çœ‹å®¹å™¨åˆ—è¡¨       | `podman ps -a`                        | é¡¯ç¤ºæ‰€æœ‰å®¹å™¨ï¼ˆåŒ…å«å·²åœæ­¢ï¼‰     |
| åœæ­¢å®¹å™¨           | `podman stop <å®¹å™¨IDæˆ–åç¨±>`          | åœæ­¢æŒ‡å®šå®¹å™¨                   |
| åˆªé™¤å®¹å™¨           | `podman rm <å®¹å™¨IDæˆ–åç¨±>`            | åˆªé™¤æŒ‡å®šå®¹å™¨                   |
| åˆªé™¤æ˜ åƒæª”         | `podman rmi <æ˜ åƒIDæˆ–åç¨±>`           | åˆªé™¤æŒ‡å®šæ˜ åƒæª”                 |
| æŸ¥çœ‹å®¹å™¨æ—¥èªŒ       | `podman logs <å®¹å™¨IDæˆ–åç¨±>`          | é¡¯ç¤ºå®¹å™¨è¼¸å‡º                   |
| é€²å…¥å®¹å™¨           | `podman exec -it <å®¹å™¨IDæˆ–åç¨±> bash` | é€²å…¥å®¹å™¨åŸ·è¡Œ bash              |
| å»ºç«‹æ˜ åƒæª”         | `podman build -t my-image .`          | ä½¿ç”¨ Containerfile å»ºç«‹æ˜ åƒæª”  |
| æŸ¥çœ‹ç¶²è·¯è¨­å®š       | `podman network ls`                   | åˆ—å‡º Podman ç¶²è·¯               |
| å»ºç«‹è‡ªè¨‚ç¶²è·¯       | `podman network create my-net`        | å»ºç«‹è‡ªè¨‚æ©‹æ¥ç¶²è·¯               |
| åŸ·è¡Œ rootless å®¹å™¨ | `podman run -it alpine sh`            | é root ä½¿ç”¨è€…åŸ·è¡Œå®¹å™¨         |

> ğŸ“Œ å»ºè­°ï¼šæ­é… `--rm` å¯åœ¨å®¹å™¨çµæŸå¾Œè‡ªå‹•æ¸…é™¤ï¼Œé©åˆæ¸¬è©¦ç”¨é€”ï¼›æ­é… `-v` å¯æ›è¼‰è³‡æ–™å¤¾ã€‚

## ä½¿ç”¨ Containerfile å»ºç«‹æ˜ åƒæª”

Podman æ”¯æ´ä½¿ç”¨ `Containerfile` æˆ– `Dockerfile` å»ºæ§‹é¡åƒã€‚

ç¯„ä¾‹ï¼šå»ºç«‹ä¸€å€‹ç°¡å–®çš„ Nginx æ˜ åƒæª”

```dockerfile
FROM nginx:alpine
COPY ./html /usr/share/nginx/html
```

ç›®éŒ„çµæ§‹ï¼š

```
my-nginx/
â”œâ”€â”€ Containerfile
â””â”€â”€ html/
    â””â”€â”€ index.html
```

å»ºç«‹æ˜ åƒæª”ï¼š

```bash
cd my-nginx
podman build -t my-nginx .
```

åŸ·è¡Œæ˜ åƒæª”ï¼š

```bash
podman run -d -p 8080:80 my-nginx
```

æ¥è‘—å¯ç”¨ç€è¦½å™¨é–‹å•Ÿ `http://localhost:8080` æŸ¥çœ‹æ•ˆæœã€‚

## Podman vs Docker

| é …ç›®             | Podman                                                       | Docker                                            |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------- |
| **æ¶æ§‹**         | ç„¡å®ˆè­·ç¨‹åºï¼ˆDaemonlessï¼‰ï¼Œæ¯å€‹å®¹å™¨ç¨ç«‹åŸ·è¡Œ                   | æœ‰å®ˆè­·ç¨‹åºï¼ˆDaemonï¼‰ï¼Œé€é `dockerd` ç®¡ç†æ‰€æœ‰å®¹å™¨ |
| **æ¬Šé™æ¨¡å¼**     | æ”¯æ´ Rootless æ¨¡å¼ï¼Œå¯åœ¨é root ä½¿ç”¨è€…ä¸‹åŸ·è¡Œå®¹å™¨ï¼Œæå‡å®‰å…¨æ€§ | é è¨­éœ€ root æ¬Šé™ï¼Œé›–ç„¶æ”¯æ´ rootlessï¼Œä½†è¨­å®šè¼ƒè¤‡é›œ |
| **OCI ç›¸å®¹æ€§**   | å®Œå…¨æ”¯æ´ OCI æ¨™æº–ï¼Œå¯åŸ·è¡Œ Docker æ˜ åƒæª”èˆ‡ CLI æŒ‡ä»¤           | åŒæ¨£æ”¯æ´ OCI æ¨™æº–ï¼Œæ˜¯æœ€æ—©æ¨å‹•è©²æ¨™æº–çš„å·¥å…·ä¹‹ä¸€     |
| **ç³»çµ±æ•´åˆ**     | å¯èˆ‡ systemd æ•´åˆï¼Œå°‡å®¹å™¨ç•¶ä½œ Linux æœå‹™ç®¡ç†                 | ä¸»è¦é€é Docker Compose æˆ– Swarm é€²è¡Œç·¨æ’èˆ‡ç®¡ç†   |
| **é ç«¯ç®¡ç†èƒ½åŠ›** | åŸç”Ÿä¸æ”¯æ´é ç«¯ APIï¼Œä½†å¯é€é Podman REST API æˆ– SSH ç®¡ç†     | å…§å»º REST APIï¼Œæ”¯æ´é ç«¯ CLI æ“ä½œèˆ‡ç¬¬ä¸‰æ–¹å·¥å…·æ•´åˆ  |
| **å®¹å™¨å•Ÿå‹•é€Ÿåº¦** | ç„¡éœ€å®ˆè­·ç¨‹åºï¼ŒæŸäº›æƒ…å¢ƒä¸‹å•Ÿå‹•é€Ÿåº¦æ›´å¿«                         | å®ˆè­·ç¨‹åºéœ€å•Ÿå‹•ä¸¦ç¶­æŒé€£ç·šï¼Œå¯èƒ½å½±éŸ¿å•Ÿå‹•æ•ˆç‡        |
| **ä½¿ç”¨æƒ…å¢ƒ**     | é©åˆå–®æ©Ÿé–‹ç™¼ã€ç³»çµ±æ•´åˆã€å¼·èª¿å®‰å…¨æ€§çš„ç’°å¢ƒ                     | é©åˆå¤šç¯€é»éƒ¨ç½²ã€CI/CDã€é›²ç«¯å¹³å°æ•´åˆçš„å ´æ™¯         |
| **ç¤¾ç¾¤èˆ‡ç”Ÿæ…‹ç³»** | ç¤¾ç¾¤æ´»èºï¼ŒRed Hat èˆ‡ Fedora ç©æ¥µæ¨å»£                         | ç”Ÿæ…‹ç³»æˆç†Ÿï¼Œæ“æœ‰å¤§é‡æ•™å­¸è³‡æºèˆ‡ç¬¬ä¸‰æ–¹å·¥å…·æ”¯æ´      |

> ğŸ“Œ **å»ºè­°é¸ç”¨ï¼š**
> - è‹¥ä½ åå¥½ç„¡å®ˆè­·ç¨‹åºã€rootless å®‰å…¨æ€§ã€èˆ‡ Linux ç³»çµ±æ•´åˆï¼ŒPodman æ˜¯ç†æƒ³é¸æ“‡ã€‚
> - è‹¥ä½ éœ€è¦æˆç†Ÿç”Ÿæ…‹ç³»ã€é ç«¯ç®¡ç†ã€æˆ–å¤šç¯€é»å®¹å™¨ç·¨æ’ï¼ŒDocker æ›´ç‚ºåˆé©ã€‚



----------

åƒè€ƒè³‡æ–™ï¼š

- [Docker ç­†è¨˜](https://blog.poychang.net/note-docker/)
